% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/openai-batch.R
\name{openai_poll_and_download}
\alias{openai_poll_and_download}
\title{Poll and Download the Results of an OpenAI Message Batch}
\usage{
openai_poll_and_download(
  batch_response,
  timeout = 3600,
  max_retries = 3,
  pause_cap = 1200,
  tidy = TRUE,
  quiet = FALSE
)
}
\arguments{
\item{batch_response}{A \code{list} containing details about the batch to poll,
typically returned by \code{\link[=openai_batch_job]{openai_batch_job()}} or
\code{\link[=openai_check_batch_status]{openai_check_batch_status()}}.}

\item{timeout}{An integer specifying the maximum time (in seconds) to wait
for the batch to complete. Defaults to \code{3600} (1 hour).}

\item{max_retries}{An integer specifying the maximum number of retry attempts
for status checks or download failures. Defaults to \code{3}.}

\item{pause_cap}{A numeric value representing the maximum pause duration (in
seconds) between retries. Defaults to \code{1200}.}

\item{tidy}{A logical value indicating whether to return the results in a
tidy format (e.g., a \code{data.frame}). Defaults to \code{TRUE}.}

\item{quiet}{A logical value indicating whether to suppress log messages
during polling and downloading. Defaults to \code{FALSE}.}
}
\value{
A \code{list} or \code{data.frame} containing the results of the batch:
\itemize{
\item If \code{tidy = TRUE}, the results are returned in a structured format (e.g., a \code{data.frame} where each row corresponds to a prompt-completion pair).
\item If \code{tidy = FALSE}, the raw results are returned as received from the OpenAI API.
}
}
\description{
This function repeatedly checks the status of an OpenAI message batch,
waiting for its completion before downloading the results.
}
\details{
The function repeatedly checks the status of the batch using the
OpenAI API's \href{https://platform.openai.com/docs/api-reference/batch}{batch status endpoint}, and
downloads the results once the batch is complete.
}
\seealso{
\itemize{
\item \code{\link[=poll_and_download]{poll_and_download()}} for the generic polling and downloading function.
\item \code{\link[=openai_batch_job]{openai_batch_job()}} for initiating a batch request.
\item \code{\link[=openai_download_batch_results]{openai_download_batch_results()}} for downloading results without polling.
}

Other openai: 
\code{\link{openai_batch_job}()},
\code{\link{openai_cancel_batch}()},
\code{\link{openai_check_batch_status}()},
\code{\link{openai_download_batch_results}()},
\code{\link{openai_list_batches}()},
\code{\link{openai_single_request}()}

Other batch: 
\code{\link{batch_job}()},
\code{\link{call_batch_api}()},
\code{\link{cancel_batch}()},
\code{\link{check_batch_status}()},
\code{\link{claude_batch_job}()},
\code{\link{claude_cancel_batch}()},
\code{\link{claude_check_batch_status}()},
\code{\link{claude_download_batch_results}()},
\code{\link{claude_list_batches}()},
\code{\link{claude_poll_and_download}()},
\code{\link{download_results}()},
\code{\link{list_batches}()},
\code{\link{openai_batch_job}()},
\code{\link{openai_cancel_batch}()},
\code{\link{openai_check_batch_status}()},
\code{\link{openai_download_batch_results}()},
\code{\link{openai_list_batches}()},
\code{\link{poll_and_download}()}
}
\concept{batch}
\concept{openai}
